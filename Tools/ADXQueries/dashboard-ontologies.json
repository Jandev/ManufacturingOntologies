{"$schema":"https://dataexplorer.azure.com/static/d/schema/38/dashboard.json","id":"7e2c8907-9a1f-4e17-a76b-fd767322ba28","eTag":"e5546461-7af7-40f1-9c70-3280554e51bc","schema_version":"38","title":"ontologies","autoRefresh":{"defaultInterval":"30s","enabled":true,"minInterval":"30s"},"sharedQueries":[],"tiles":[{"id":"fa7b9b0d-a5d7-48b6-9626-4387d08d9fa1","title":"Assembly Munich Status 0=station ready to do work, 1=work in progress, 2=work done and good part manufactured, 3=work done and scrap manufactured, 4=station in fault state","visualType":"timechart","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":0,"y":11,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":["_endTime","_startTime"],"text":"opcua_metadata_lkv\n| where Name contains \"assembly\"\n| where Name contains \"munich\"\n| join kind=inner (opcua_telemetry\n    | where Name == \"Status\"\n    | where Timestamp > _startTime and Timestamp < _endTime\n) on DataSetWriterID\n| extend NodeValue = toint(Value)\n| project Timestamp, NodeValue\n"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"b1fb5a2b-2d91-4d81-ab04-b541ebae8b87","title":"Assembly Munich Energy Consumption Anomalies","visualType":"anomalychart","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":0,"y":26,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":["_endTime","_startTime"],"text":"opcua_metadata_lkv\n| where Name contains \"assembly\"\n| where Name contains \"munich\"\n| join kind=inner (opcua_telemetry\n    | where Name == \"EnergyConsumption\"\n    | where Timestamp > _startTime and Timestamp < _endTime\n) on DataSetWriterID\n| order by Timestamp desc\n| make-series num=avg(todouble(Value)) on Timestamp from _startTime to _endTime step 1s \n| extend (anomalies, score, baseline) = series_decompose_anomalies(num, 0.5, -1, 'linefit')"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"009fe348-8126-4ac0-aedb-721e5b02c104","title":"Assembly Munich Number of Manufactured Products Forecast","visualType":"timechart","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":0,"y":34,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":["_endTime","_startTime"],"text":"let horizon = (_endTime - _startTime) / 2;\nlet dt = 1m;\nopcua_metadata_lkv\n| where Name contains \"assembly\"\n| where Name contains \"munich\"\n| join kind=inner (opcua_telemetry\n    | where Name == \"NumberOfManufacturedProducts\"\n    | where Timestamp > _startTime and Timestamp < _endTime\n) on DataSetWriterID\n| order by Timestamp desc\n| make-series actual=avg(toint(Value)) on Timestamp from _startTime to _endTime + horizon step dt\n| extend forecast = series_decompose_forecast(actual, toint(horizon/dt))"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"3c7c802e-10dd-43d8-9f8b-7a6ce89248ea","title":"Assembly Munich OEE (%)","visualType":"card","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":0,"y":0,"width":5,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":[],"text":"let oee = CalculateOEEForStation(\"assembly\", \"munich\", 6000, 6);\nprint round(oee * 100, 2)"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorStyle":"light","colorRules":[]}},{"id":"cecbff7d-419b-4f7e-b428-1bfc5d3fa9d4","title":"Test Munich OEE (%)","visualType":"card","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":5,"y":0,"width":4,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":[],"text":"let oee = CalculateOEEForStation(\"test\", \"munich\", 6000, 6);\nprint round(oee * 100, 2)"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorStyle":"light","colorRules":[]}},{"id":"53e9878c-4a51-400f-8b98-fc1ca5773db2","title":"Packaging Munich OEE (%)","visualType":"card","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":9,"y":0,"width":5,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":[],"text":"let oee = CalculateOEEForStation(\"packaging\", \"munich\", 6000, 6);\nprint round(oee * 100, 2)"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorStyle":"light","colorRules":[]}},{"id":"cd7418a2-2cdb-40c2-9a3f-ebd5d4cfc8c1","title":"Assembly Munich Average Energy Consumption (Watt)","visualType":"card","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":18,"y":0,"width":6,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":[],"text":"let shiftEndTime = now();\nlet shiftStartTime = datetime_add('hour', -6, shiftEndTime);\nlet averageEnergyConsumption = toscalar(\nopcua_metadata_lkv\n| where Name contains \"assembly\"\n| where Name contains \"munich\"\n| join kind=inner (opcua_telemetry\n    | where Name == \"EnergyConsumption\"\n    | where Timestamp > shiftStartTime and Timestamp < shiftEndTime\n) on DataSetWriterID\n| extend energy = todouble(Value)\n| summarize avg(energy));\nprint round(toscalar(averageEnergyConsumption) * 1000, 2)\n\n"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorStyle":"light","colorRules":[]}},{"id":"bd5bd97d-e761-416b-a13a-198b394d60bd","title":"Munich OEE (%)","visualType":"card","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":14,"y":0,"width":4,"height":3},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":[],"text":"print round(CalculateOEEForLine(\"munich\", 6000, 6) * 100, 2)\n"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorStyle":"light","colorRules":[]}},{"id":"1bccbda7-4250-4e72-9bb0-5ea48fba7a7c","title":"UA Cloud Publisher Munich Diagnostics","visualType":"table","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":0,"y":42,"width":12,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":["_endTime","_startTime"],"text":"opcua_metadata_lkv\n| where Name contains \"publisher\"\n| where Name contains \"munich\"\n| join kind=inner (opcua_telemetry\n    | where Timestamp > _startTime and Timestamp < _endTime\n) on DataSetWriterID\n| extend NodeValue = toint(Value)\n| project Timestamp, Name1, NodeValue\n| summarize arg_max(Timestamp, *) by Name1"},"visualOptions":{"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[]}},{"id":"c2fa5519-6184-4dcd-bfc1-251a12347927","title":"UA Cloud Publisher Seattle Diagnostics","visualType":"table","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":12,"y":42,"width":12,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":["_endTime","_startTime"],"text":"opcua_metadata_lkv\n| where Name contains \"publisher\"\n| where Name contains \"seattle\"\n| join kind=inner (opcua_telemetry\n    | where Timestamp > _startTime and Timestamp < _endTime\n) on DataSetWriterID\n| extend NodeValue = toint(Value)\n| project Timestamp, Name1, NodeValue\n| summarize arg_max(Timestamp, *) by Name1\n"},"visualOptions":{"table__enableRenderLinks":true,"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[]}},{"id":"f40a3620-253c-4bfa-8117-55f92c786a5a","title":"Assembly Seattle Pressure","visualType":"line","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":0,"y":19,"width":24,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":["_endTime","_startTime"],"text":"opcua_metadata_lkv\n| where Name contains \"assembly\"\n| where Name contains \"seattle\"\n| join kind=inner (opcua_telemetry\n    | where Name == \"Pressure\"\n    | where Timestamp > _startTime and Timestamp < _endTime\n) on DataSetWriterID\n| extend NodeValue = toint(Value)\n| project Timestamp, NodeValue\n\n"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[{"id":"a75e2537-5027-4539-b871-85ba4980c17f","value":4000},{"id":"86274a8e-35be-4381-a18d-10438f4eaf73","value":null}]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"0007dcbf-baae-4344-9118-a8eb4f012476","title":"Assembly Munich Actual Cycle Time","visualType":"line","pageId":"1604d4fc-a7b5-4e47-82c6-640286103fde","layout":{"x":0,"y":3,"width":24,"height":8},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"09ab8651-b041-4b8e-ba7b-347796f7911c"},"usedVariables":["_endTime","_startTime"],"text":"opcua_metadata_lkv\n| where Name contains \"assembly\"\n| where Name contains \"munich\"\n| join kind=inner (opcua_telemetry\n    | where Name == \"ActualCycleTime\"\n    | where Timestamp > _startTime and Timestamp < _endTime\n) on DataSetWriterID\n| extend NodeValue = todouble(Value)\n| project Timestamp, NodeValue"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[{"id":"fde873eb-f724-4b10-b30f-e5660ca4ada2","value":null},{"id":"87291fde-a48c-4da4-9818-223460913fd2","value":6000}]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}}],"parameters":[{"kind":"duration","id":"a39aa2bf-5ca5-4387-8d75-6c927c7f6c5c","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"09ab8651-b041-4b8e-ba7b-347796f7911c","name":"ontologies","clusterUri":"https://erichbtest5adx.northeurope.kusto.windows.net/","database":"ontologies","kind":"manual-kusto","scopeId":"kusto"}],"pages":[{"name":"Page 1","id":"1604d4fc-a7b5-4e47-82c6-640286103fde"}]}